{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="{% static 'index/pintura.css' %}"/>
    <link rel="stylesheet" href="{% static 'index/styles.css' %}" />
  </head>
  <body>
    <input type="file" id="imageupload" onchange="upload_image(this)">

    <div class="my-editor"></div>

    <script type="text/javascript">
    </script>
    <script type="module">
      function upload_image(item){
        var img = new Image();
        // alert(URL.createObjectURL(item.files[0]));
        img.src = URL.createObjectURL(item.files[0]);
        editor.src = img;
      };
      window.upload_image=upload_image;
      alert('{{image.url}}');
      var reader = new FileReader();
      var inp = document.getElementById('imageupload');
      import { appendDefaultEditor } from "{% static 'index/pintura.js' %}";

      const editor = appendDefaultEditor(".my-editor", {
        // The source image to load
        // "{% static 'index/my-image.jpeg' %}" original image static
        src: "{{image.url}}",

        // This will set a square crop aspect ratio
        // imageCropAspectRatio: 1,

        // Stickers available to user
        stickers: [
          ["Emoji", ["â­ï¸", "ðŸ˜Š", "ðŸ‘", "ðŸ‘Ž", "â˜€ï¸", "ðŸŒ¤", "ðŸŒ¥",'â¤','ðŸ¤£','ðŸŒ','ðŸ˜Ž','ðŸ¥’','ðŸ‘€','ðŸ˜']],
          [
            "Markers",
            [
              {
                src: "sticker-one.svg",
                width: "5%",
                alt: "One"
              },
              {
                src: "sticker-two.svg",
                width: "5%",
                alt: "Two"
              },
              {
                src: "sticker-three.svg",
                width: "5%",
                alt: "Three"
              }
            ]
          ]
        ]
      });


      // inp.onchange = function (reader) {
      //   alert('asd')
      //   inp.readAsDataURL(document.getElementById('imageupload').files[0]);
      //   editor.loadImage = reader.target.result;}

      editor.on("load", (res) => {
        console.log("load", res);
      });

      editor.on("process", (res) => {
        console.log("process", res);
      });
    </script>
  </body>
</html>
